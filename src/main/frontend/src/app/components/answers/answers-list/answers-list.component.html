<mat-toolbar>
  <span>Ответы</span>
  <span class="fill-remaining-space"></span>
  <button
    mat-raised-button
    color="primary"
    (click)="checkPrerequisitesAndDoImportAnswers()"
  >
    Импортировать ответы из письма
  </button>
</mat-toolbar>
<div>
  <p>
    <mat-form-field class="team-selection-field">
      <mat-label>Команда:</mat-label>
      <mat-select
        [(value)]="selectedTeamId"
        placeholder="Команда"
        (selectionChange)="actualTeamChanged($event)"
      >
        <mat-option
          *ngFor="let teamId of allTeamIds; index as i"
          [value]="teamId"
        >
          {{ teamTitleAndNumber[i] }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </p>
  <p>
    <mat-radio-group [(ngModel)]="selectedRoundAlias">
      <mat-radio-button
        class="round-selection-radio-button"
        *ngFor="let selectedRoundAlias of allRoundAliases; index as i"
        [value]="selectedRoundAlias"
        (change)="actualRoundChanged($event)"
      >
        {{ allRoundTitles[i] }}
      </mat-radio-button>
    </mat-radio-group>
  </p>
</div>
<div>
  <mat-tab-group>
    <mat-tab label="Все ответы">
      <table
        mat-table
        [dataSource]="answersDataSource"
        class="mat-elevation-z8"
      >
        <ng-container matColumnDef="number">
          <th mat-header-cell *matHeaderCellDef>&nbsp;Номер&nbsp;</th>
          <td mat-cell *matCellDef="let answer">{{ answer.questionNumber }}</td>
        </ng-container>

        <ng-container matColumnDef="body">
          <th mat-header-cell *matHeaderCellDef>&nbsp;Содержание&nbsp;</th>
          <td mat-cell *matCellDef="let answer">{{ answer.body }}</td>
        </ng-container>

        <ng-container matColumnDef="comment">
          <th mat-header-cell *matHeaderCellDef>&nbsp;Комментарий&nbsp;</th>
          <td mat-cell *matCellDef="let answer">{{ answer.comment }}</td>
        </ng-container>

        <ng-container matColumnDef="roundNumber">
          <th mat-header-cell *matHeaderCellDef>&nbsp;Тур&nbsp;</th>
          <td mat-cell *matCellDef="let answer">{{ answer.roundNumber }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedAnswerColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedAnswerColumns"
          (click)="onAnswerRowClicked(row)"
        ></tr>
      </table>
    </mat-tab>
    <mat-tab label="Ответы без оценок">
      <table
        mat-table
        [dataSource]="answersWithoutGradesDataSource"
        class="mat-elevation-z8"
      >
        <ng-container matColumnDef="number">
          <th mat-header-cell *matHeaderCellDef>&nbsp;Номер&nbsp;</th>
          <td mat-cell *matCellDef="let answer">{{ answer.number }}</td>
        </ng-container>

        <ng-container matColumnDef="body">
          <th mat-header-cell *matHeaderCellDef>&nbsp;Содержание&nbsp;</th>
          <td mat-cell *matCellDef="let answer">{{ answer.body }}</td>
        </ng-container>

        <ng-container matColumnDef="comment">
          <th mat-header-cell *matHeaderCellDef>&nbsp;Комментарий&nbsp;</th>
          <td mat-cell *matCellDef="let answer">{{ answer.comment }}</td>
        </ng-container>

        <ng-container matColumnDef="roundNumber">
          <th mat-header-cell *matHeaderCellDef>&nbsp;Тур&nbsp;</th>
          <td mat-cell *matCellDef="let answer">{{ answer.roundNumber }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedAnswerColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedAnswerColumns"
          (click)="onAnswerRowClicked(row)"
        ></tr>
      </table>
    </mat-tab>
    <mat-tab label="Загруженные письма">
      <table mat-table [dataSource]="emailsDataSource" class="mat-elevation-z8">
        <ng-container matColumnDef="sentOn">
          <th mat-header-cell *matHeaderCellDef>&nbsp;Отправлено&nbsp;</th>
          <td mat-cell *matCellDef="let email">
            {{ email.sentOnDisplayString }}
          </td>
        </ng-container>
        <ng-container matColumnDef="importedOn">
          <th mat-header-cell *matHeaderCellDef>
            &nbsp;Загружено в систему&nbsp;
          </th>
          <td mat-cell *matCellDef="let email">
            {{ email.importedOnDisplayString }}
          </td>
        </ng-container>
        <ng-container matColumnDef="questionNumbersSequence">
          <th mat-header-cell *matHeaderCellDef>&nbsp;Номера заданий&nbsp;</th>
          <td mat-cell *matCellDef="let email">
            {{ email.questionNumbersSequence }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedEmailColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedEmailColumns"
          (click)="onEmailRowClicked(row)"
        ></tr>
      </table>
    </mat-tab>
  </mat-tab-group>
</div>
