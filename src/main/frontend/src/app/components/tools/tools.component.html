<!-- SPDX-License-Identifier: GPL-3.0-only
Copyright (c) 2020 - 2022 by Rafael Osipov <rafael.osipov@outlook.com> -->

<div class="container">
  <h3>Настройки и управление</h3>

  <mat-tab-group>
    <mat-tab label="Настройки">
      <mat-tab-group dynamicHeight>
        <mat-tab label="Список заданий">
          <table class="color-table">
            <thead>
              <tr>
                <td colspan="2" class="color-table-header-cell">Настройка цветов фона строк для списка заданий</td>
              </tr>
            </thead>
            <tbody>
              <tr class="color-table-row">
                <td class="color-description-cell" [style.background-color]="backgroundColorForRowWithGradedQuestion">
                  Цвет фона для строк с зачётными заданиями:
                </td>
                <td class="color-picker-cell">
                  <input [(colorPicker)]="backgroundColorForRowWithGradedQuestion"
                    [style.background]="backgroundColorForRowWithGradedQuestion" [cpPosition]="cpPositionMode"
                    (colorPickerSelect)="onBackgroundColorForGradedQuestionSelected($event)" width="100%"
                    [cpAlphaChannel]="cpAlphaChannelMode" />
                </td>
              </tr>
              <tr class="color-table-row">
                <td class="color-description-cell"
                  [style.background-color]="backgroundColorForRowWithNonGradedQuestion">
                  Цвет фона для строк с внезачётными заданиями:
                </td>
                <td class="color-picker-cell">
                  <input [(colorPicker)]="backgroundColorForRowWithNonGradedQuestion"
                    [style.background]="backgroundColorForRowWithNonGradedQuestion" [cpPosition]="cpPositionMode"
                    (colorPickerSelect)="onBackgroundColorForNonGradedQuestionSelected($event)" width="100%"
                    [cpAlphaChannel]="cpAlphaChannelMode" />
                </td>
              </tr>
            </tbody>
            <tfoot>
              <tr class="spacer-table-row">
                <td colspan="2">
                  &nbsp;
                </td>
              </tr>
              <tr class="spacer-table-row">
                <td colspan="2">
                  <button mat-raised-button color="primary" (click)="resetQuestionColorsToDefaults()"
                    class="reset-button-style">
                    Сбросить настройки цвета в значения по-умолчанию
                  </button>
                </td>
              </tr>
              <tr class="spacer-table-row">
                <td colspan="2">
                  &nbsp;
                </td>
              </tr>
              <tr class="spacer-table-row">
                <td colspan="2">
                  &nbsp;
                </td>
              </tr>
              <tr class="spacer-table-row">
                <td colspan="2">
                  &nbsp;
                </td>
              </tr>
            </tfoot>
          </table>
        </mat-tab>
        <mat-tab label="Список ответов">
          <table class="color-table">
            <thead>
              <tr>
                <td colspan="2" class="color-table-header-cell">Настройка цветов фона строк для списков ответов</td>
              </tr>
            </thead>
            <tbody>
              <tr class="color-table-row">
                <td class="color-description-cell" [style.background-color]="notGradedAnswerBackgroundColor">
                  Цвет фона строк для ответов без оценки:
                </td>
                <td class="color-picker-cell">
                  <input [(colorPicker)]="notGradedAnswerBackgroundColor"
                    [style.background]="notGradedAnswerBackgroundColor" [cpPosition]="cpPositionMode"
                    (colorPickerSelect)="onBackgroundColorForNotGradedAnswerSelected($event)" width="100%"
                    [cpAlphaChannel]="cpAlphaChannelMode" />
                </td>
              </tr>
              <tr class="color-table-row">
                <td class="color-description-cell" [style.background-color]="acceptedAnswerBackgroundColor">
                  Цвет фона строк для зачтённых (принятых) ответов:
                </td>
                <td class="color-picker-cell">
                  <input [(colorPicker)]="acceptedAnswerBackgroundColor"
                    [style.background]="acceptedAnswerBackgroundColor" [cpPosition]="cpPositionMode"
                    (colorPickerSelect)="onBackgroundColorForAcceptedAnswerSelected($event)" width="100%"
                    [cpAlphaChannel]="cpAlphaChannelMode" />
                </td>
              </tr>
              <tr class="color-table-row">
                <td class="color-description-cell" [style.background-color]="notAcceptedAnswerBackgroundColor">
                  Цвет фона строк для не зачтённых (не принятых) ответов:
                </td>
                <td class="color-picker-cell">
                  <input [(colorPicker)]="notAcceptedAnswerBackgroundColor"
                    [style.background]="notAcceptedAnswerBackgroundColor" [cpPosition]="cpPositionMode"
                    (colorPickerSelect)="onBackgroundColorForNotAcceptedAnswerSelected($event)" width="100%"
                    [cpAlphaChannel]="cpAlphaChannelMode" />
                </td>
              </tr>
            </tbody>
            <tfoot>
              <tr class="spacer-table-row">
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr class="spacer-table-row">
                <td colspan="2">Чтобы выбрать цвет, нажмите на кружок в соответствующей ячейке справа вверху, выберите
                  цвет, и нажмите на этот-же кружок ещё раз. Выбранный будет сохранён в настройках автоматически. Чтобы
                  сбросить настройки цвета в значения по-умолчанию, нажмите на соответствующую кнопку, расположенную
                  ниже.</td>
              </tr>
              <tr class="spacer-table-row">
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr class="spacer-table-row">
                <td colspan="2">
                  <button mat-raised-button color="primary" (click)="resetAnswerColorsToDefaults()"
                    class="reset-button-style">
                    Сбросить настройки цвета в значения по-умолчанию
                  </button>
                </td>
              </tr>
            </tfoot>
          </table>
        </mat-tab>
      </mat-tab-group>
    </mat-tab>
    <mat-tab label="Управление">
      <table class="db-reset-table">
        <tr>
          <td class="db-reset-table-heading-row">Сброс состояния базы для следующего тура</td>
        </tr>
        <tr>
          <td>
            <p>Сброс состояния подразумевает безвозвратное удаление из&nbsp;базы всех импортированных писем
              и&nbsp;ответов. В&nbsp;базе остаётся лишь информация о&nbsp;заданиях и&nbsp;командах.</p>

            <p>Перед сбросом рекомендуется <a
                href="https://github.com/cdefgah/poetica/wiki/%D0%A7%D0%B0%D1%81%D1%82%D0%BE-%D0%B7%D0%B0%D0%B4%D0%B0%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5-%D0%B2%D0%BE%D0%BF%D1%80%D0%BE%D1%81%D1%8B"
                target="_blank">завершить работу приложения</a> и&nbsp;скопировать файл poetica.sqlite в&nbsp;безопасное
              место.
              После чего стартовать приложение заново и&nbsp;вернуться на&nbsp;эту страницу.</p>

            <p>В&nbsp;поле, расположенное ниже, с&nbsp;соблюдением регистра букв, без кавычек и&nbsp;лишних пробелов,
              введите текст:
              &laquo;Удалить все ответы и&nbsp;письма&raquo; и&nbsp;нажимте кнопку &laquo;Сбросить состояние базы&raquo;
            </p>
          </td>
        </tr>
        <tr>
          <td>
            <input matInput required ngClass="spell-word-field" placeholder="Текст писать сюда..."
              [(ngModel)]="dbResetSpellWord" appBlockCopyPaste />
          </td>
        </tr>
        <tr>
          <td>
            <button mat-raised-button color="accent" (click)="resetDatabase()" class="reset-button-style">
              Сбросить состояние базы
            </button>
          </td>
        </tr>
      </table>
    </mat-tab>
  </mat-tab-group>
</div>